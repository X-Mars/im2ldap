import{p as r,d as fe,u as be,E as $,i as me,r as w,y as oe,q as ve,o as _e,c as S,f as l,w as a,g as h,e as n,B as W,n as o,x as c,k as _,I as B,C as ce,t as P,J as E,K as N,A as M,F as O,L as Ce,j as V,_ as ke}from"./index-DyXSoxUy.js";const s={getWeComConfigs:()=>r.get("/auth/wecom-config/"),createWeComConfig:d=>r.post("/auth/wecom-config/",d),updateWeComConfig:(d,k)=>r.patch(`/auth/wecom-config/${d}/`,k),deleteWeComConfig:d=>r.delete(`/auth/wecom-config/${d}/`),getCurrentWeComConfig:()=>r.get("/auth/wecom-config/current/"),getFeiShuConfigs:()=>r.get("/auth/feishu-config/"),createFeiShuConfig:d=>r.post("/auth/feishu-config/",d),updateFeiShuConfig:(d,k)=>r.patch(`/auth/feishu-config/${d}/`,k),deleteFeiShuConfig:d=>r.delete(`/auth/feishu-config/${d}/`),getCurrentFeiShuConfig:()=>r.get("/auth/feishu-config/current/"),getDingTalkConfigs:()=>r.get("/auth/dingtalk-config/"),createDingTalkConfig:d=>r.post("/auth/dingtalk-config/",d),updateDingTalkConfig:(d,k)=>r.patch(`/auth/dingtalk-config/${d}/`,k),deleteDingTalkConfig:d=>r.delete(`/auth/dingtalk-config/${d}/`),getCurrentDingTalkConfig:()=>r.get("/auth/dingtalk-config/current/"),getGitHubConfigs:()=>r.get("/auth/github-config/"),createGitHubConfig:d=>r.post("/auth/github-config/",d),updateGitHubConfig:(d,k)=>r.patch(`/auth/github-config/${d}/`,k),deleteGitHubConfig:d=>r.delete(`/auth/github-config/${d}/`),getCurrentGitHubConfig:()=>r.get("/auth/github-config/current/"),getGoogleConfigs:()=>r.get("/auth/google-config/"),createGoogleConfig:d=>r.post("/auth/google-config/",d),updateGoogleConfig:(d,k)=>r.patch(`/auth/google-config/${d}/`,k),deleteGoogleConfig:d=>r.delete(`/auth/google-config/${d}/`),getCurrentGoogleConfig:()=>r.get("/auth/google-config/current/"),getGitLabConfigs:()=>r.get("/auth/gitlab-config/"),createGitLabConfig:d=>r.post("/auth/gitlab-config/",d),updateGitLabConfig:(d,k)=>r.patch(`/auth/gitlab-config/${d}/`,k),deleteGitLabConfig:d=>r.delete(`/auth/gitlab-config/${d}/`),getCurrentGitLabConfig:()=>r.get("/auth/gitlab-config/current/"),getGiteeConfigs:()=>r.get("/auth/gitee-config/"),createGiteeConfig:d=>r.post("/auth/gitee-config/",d),updateGiteeConfig:(d,k)=>r.patch(`/auth/gitee-config/${d}/`,k),deleteGiteeConfig:d=>r.delete(`/auth/gitee-config/${d}/`),getCurrentGiteeConfig:()=>r.get("/auth/gitee-config/current/")},Ve={class:"oauth-config-container"},ye={class:"config-tips"},we={class:"tab-header"},he={class:"config-tips"},Ge={class:"tab-header"},Ue={class:"config-tips"},$e={class:"tab-header"},De={class:"config-tips"},Se={class:"tab-header"},Ie={class:"config-tips"},Le={class:"tab-header"},xe={class:"config-tips"},Te={class:"tab-header"},Fe={class:"config-tips"},He={class:"tab-header"},qe=fe({__name:"OAuthConfig",setup(d){var ie;const k=me();((ie=be().user)==null?void 0:ie.role)!=="superuser"&&($.error("只有超级管理员可以访问此页面"),k.push("/"));const C=w("wecom"),j=w(!1),Q=w(!1),G=w(null),K=w(),X=w([]),Y=w([]),Z=w([]),ee=w([]),le=w([]),te=w([]),ae=w([]),U=w({wecom:!1,feishu:!1,dingtalk:!1,github:!1,google:!1,gitlab:!1,gitee:!1}),i=w({corp_id:"",agent_id:"",secret:"",app_id:"",app_secret:"",client_id:"",client_secret:"",redirect_uri:"",gitlab_server:"https://gitlab.com",enabled:!0,sync_enabled:!0,fetch_users:!0}),ne=oe(()=>{const f=G.value?"编辑":"新建",e={wecom:"企业微信",feishu:"飞书",dingtalk:"钉钉",github:"GitHub",google:"Google",gitlab:"GitLab",gitee:"Gitee"}[C.value];return`${f}${e}配置`}),ue={corp_id:[{required:!0,message:"请输入企业ID",trigger:"blur"}],agent_id:[{required:!0,message:"请输入应用ID",trigger:"blur"}],secret:[{required:!0,message:"请输入应用密钥",trigger:"blur"}],app_id:[{required:!0,message:"请输入应用ID",trigger:"blur"}],app_secret:[{required:!0,message:"请输入应用密钥",trigger:"blur"}],client_id:[{required:!0,message:"请输入Client ID",trigger:"blur"}],client_secret:[{required:!0,message:"请输入Client Secret",trigger:"blur"}]},z=async()=>{try{switch(U.value[C.value]=!0,C.value){case"wecom":{const f=await s.getWeComConfigs();X.value=f.data;break}case"feishu":{const f=await s.getFeiShuConfigs();Y.value=f.data;break}case"dingtalk":{const f=await s.getDingTalkConfigs();Z.value=f.data;break}case"github":{const f=await s.getGitHubConfigs();ee.value=f.data;break}case"google":{const f=await s.getGoogleConfigs();le.value=f.data;break}case"gitlab":{const f=await s.getGitLabConfigs();te.value=f.data;break}case"gitee":{const f=await s.getGiteeConfigs();ae.value=f.data;break}}}catch(f){console.error(f),$.error("获取配置列表失败")}finally{U.value[C.value]=!1}},de=()=>{i.value={corp_id:"",agent_id:"",secret:"",app_id:"",app_secret:"",client_id:"",client_secret:"",redirect_uri:"",gitlab_server:"https://gitlab.com",enabled:!0,sync_enabled:!0,fetch_users:!0},G.value=null,K.value&&K.value.resetFields()},I=f=>{C.value=f,de(),j.value=!0},L=(f,e)=>{C.value=f,G.value=e,Object.assign(i.value,e),j.value=!0},x=async(f,e)=>{try{switch(await Ce.confirm("确定要删除该配置吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),f){case"wecom":await s.deleteWeComConfig(e.id);break;case"feishu":await s.deleteFeiShuConfig(e.id);break;case"dingtalk":await s.deleteDingTalkConfig(e.id);break;case"github":await s.deleteGitHubConfig(e.id);break;case"google":await s.deleteGoogleConfig(e.id);break;case"gitlab":await s.deleteGitLabConfig(e.id);break;case"gitee":await s.deleteGiteeConfig(e.id);break}$.success("删除成功"),z()}catch(b){b!=="cancel"&&(console.error(b),$.error("删除失败"))}},T=async(f,e)=>{try{const b={enabled:e.enabled};switch(f){case"wecom":await s.updateWeComConfig(e.id,b);break;case"feishu":await s.updateFeiShuConfig(e.id,b);break;case"dingtalk":await s.updateDingTalkConfig(e.id,b);break;case"github":await s.updateGitHubConfig(e.id,b);break;case"google":await s.updateGoogleConfig(e.id,b);break;case"gitlab":await s.updateGitLabConfig(e.id,b);break;case"gitee":await s.updateGiteeConfig(e.id,b);break}$.success("更新状态成功")}catch(b){console.error(b),$.error("更新状态失败"),e.enabled=!e.enabled}},re=async()=>{K.value&&await K.value.validate(async f=>{if(f){Q.value=!0;try{const e={...i.value};if(e.redirect_uri||(e.redirect_uri=`${D.value}/oauth/callback`),G.value){switch(C.value){case"wecom":await s.updateWeComConfig(G.value.id,e);break;case"feishu":await s.updateFeiShuConfig(G.value.id,e);break;case"dingtalk":await s.updateDingTalkConfig(G.value.id,e);break;case"github":await s.updateGitHubConfig(G.value.id,e);break;case"google":await s.updateGoogleConfig(G.value.id,e);break;case"gitlab":await s.updateGitLabConfig(G.value.id,e);break;case"gitee":await s.updateGiteeConfig(G.value.id,e);break}$.success("更新成功")}else{switch(C.value){case"wecom":await s.createWeComConfig(e);break;case"feishu":await s.createFeiShuConfig(e);break;case"dingtalk":await s.createDingTalkConfig(e);break;case"github":await s.createGitHubConfig(e);break;case"google":await s.createGoogleConfig(e);break;case"gitlab":await s.createGitLabConfig(e);break;case"gitee":await s.createGiteeConfig(e);break}$.success("创建成功")}j.value=!1,z()}catch(e){console.error(e),$.error("保存失败")}finally{Q.value=!1}}})};ve(C,()=>{z()}),_e(()=>{z()});const D=oe(()=>window.location.origin);return(f,e)=>{const b=h("el-link"),F=h("el-icon"),v=h("el-button"),u=h("el-table-column"),J=h("el-tag"),y=h("el-switch"),H=h("el-button-group"),q=h("el-table"),A=h("el-tab-pane"),se=h("el-tabs"),m=h("el-input"),g=h("el-form-item"),pe=h("el-form"),ge=h("el-dialog"),R=ce("loading");return V(),S("div",Ve,[l(se,{modelValue:C.value,"onUpdate:modelValue":e[7]||(e[7]=t=>C.value=t)},{default:a(()=>[l(A,{label:"企业微信配置",name:"wecom"},{default:a(()=>[n("div",ye,[e[44]||(e[44]=n("p",null,"配置说明：",-1)),n("p",null,[e[42]||(e[42]=o("1. 请先前往 ")),l(b,{href:"https://work.weixin.qq.com/wework_admin/frame#profile",type:"primary",target:"_blank"},{default:a(()=>e[41]||(e[41]=[o("企业微信管理后台")])),_:1}),e[43]||(e[43]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[45]||(e[45]=n("p",null,"3. 授权范围请选择：企业内部开发 - 通讯录",-1))]),n("div",we,[l(v,{type:"primary",onClick:e[0]||(e[0]=t=>I("wecom")),disabled:X.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[46]||(e[46]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:X.value},{default:a(()=>[l(u,{prop:"corp_id",label:"企业ID",width:"300"}),l(u,{prop:"agent_id",label:"应用ID",width:"200"}),l(u,{prop:"secret",label:"应用密钥","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"sync_enabled",label:"是否同步用户到ldap",width:"200"},{default:a(({row:t})=>[l(J,{type:t.sync_enabled?"success":"info"},{default:a(()=>[o(c(t.sync_enabled?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"fetch_users",label:"获取用户",width:"200"},{default:a(({row:t})=>[l(J,{type:t.fetch_users?"success":"info"},{default:a(()=>[o(c(t.fetch_users?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("wecom",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("wecom",t)},{default:a(()=>e[47]||(e[47]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("wecom",t)},{default:a(()=>e[48]||(e[48]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.wecom]])]),_:1}),l(A,{label:"飞书配置",name:"feishu"},{default:a(()=>[n("div",he,[e[52]||(e[52]=n("p",null,"配置说明：",-1)),n("p",null,[e[50]||(e[50]=o("1. 请先前往 ")),l(b,{href:"https://open.feishu.cn/app",type:"primary",target:"_blank"},{default:a(()=>e[49]||(e[49]=[o("飞书开放平台")])),_:1}),e[51]||(e[51]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[53]||(e[53]=n("p",null,"3. 权限请选择：获取用户基本信息",-1))]),n("div",Ge,[l(v,{type:"primary",onClick:e[1]||(e[1]=t=>I("feishu")),disabled:Y.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[54]||(e[54]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:Y.value},{default:a(()=>[l(u,{prop:"app_id",label:"应用ID"}),l(u,{prop:"app_secret",label:"应用密钥","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"sync_enabled",label:"是否同步用户到ldap",width:"200"},{default:a(({row:t})=>[l(J,{type:t.sync_enabled?"success":"info"},{default:a(()=>[o(c(t.sync_enabled?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"fetch_users",label:"获取用户",width:"200"},{default:a(({row:t})=>[l(J,{type:t.fetch_users?"success":"info"},{default:a(()=>[o(c(t.fetch_users?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("feishu",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("feishu",t)},{default:a(()=>e[55]||(e[55]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("feishu",t)},{default:a(()=>e[56]||(e[56]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.feishu]])]),_:1}),l(A,{label:"钉钉配置",name:"dingtalk"},{default:a(()=>[n("div",Ue,[e[60]||(e[60]=n("p",null,"配置说明：",-1)),n("p",null,[e[58]||(e[58]=o("1. 请先前往 ")),l(b,{href:"https://open-dev.dingtalk.com/fe/app#/corp/app",type:"primary",target:"_blank"},{default:a(()=>e[57]||(e[57]=[o("钉钉开放平台")])),_:1}),e[59]||(e[59]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[61]||(e[61]=n("p",null,"3. 权限请选择：通讯录个人信息读权限",-1))]),n("div",$e,[l(v,{type:"primary",onClick:e[2]||(e[2]=t=>I("dingtalk")),disabled:Z.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[62]||(e[62]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:Z.value},{default:a(()=>[l(u,{prop:"app_id",label:"APP ID",width:"350"}),l(u,{prop:"client_id",label:"Client ID"}),l(u,{prop:"client_secret",label:"Client Secret","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"sync_enabled",label:"是否同步用户到ldap",width:"200"},{default:a(({row:t})=>[l(J,{type:t.sync_enabled?"success":"info"},{default:a(()=>[o(c(t.sync_enabled?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"fetch_users",label:"获取用户",width:"200"},{default:a(({row:t})=>[l(J,{type:t.fetch_users?"success":"info"},{default:a(()=>[o(c(t.fetch_users?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("dingtalk",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("dingtalk",t)},{default:a(()=>e[63]||(e[63]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("dingtalk",t)},{default:a(()=>e[64]||(e[64]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.dingtalk]])]),_:1}),l(A,{label:"GitHub配置",name:"github"},{default:a(()=>[n("div",De,[e[68]||(e[68]=n("p",null,"配置说明：",-1)),n("p",null,[e[66]||(e[66]=o("1. 请先前往 ")),l(b,{href:"https://github.com/settings/developers",type:"primary",target:"_blank"},{default:a(()=>e[65]||(e[65]=[o("GitHub开发者设置")])),_:1}),e[67]||(e[67]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[69]||(e[69]=n("p",null,"3. 权限范围请选择：read:user, user:email",-1))]),n("div",Se,[l(v,{type:"primary",onClick:e[3]||(e[3]=t=>I("github")),disabled:ee.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[70]||(e[70]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:ee.value},{default:a(()=>[l(u,{prop:"client_id",label:"Client ID"}),l(u,{prop:"client_secret",label:"Client Secret","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("github",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("github",t)},{default:a(()=>e[71]||(e[71]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("github",t)},{default:a(()=>e[72]||(e[72]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.github]])]),_:1}),l(A,{label:"Google配置",name:"google"},{default:a(()=>[n("div",Ie,[e[76]||(e[76]=n("p",null,"配置说明：",-1)),n("p",null,[e[74]||(e[74]=o("1. 请先前往 ")),l(b,{href:"https://console.cloud.google.com/apis/credentials",type:"primary",target:"_blank"},{default:a(()=>e[73]||(e[73]=[o("Google Cloud Console")])),_:1}),e[75]||(e[75]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[77]||(e[77]=n("p",null,"3. 权限范围请选择：openid, email, profile",-1))]),n("div",Le,[l(v,{type:"primary",onClick:e[4]||(e[4]=t=>I("google")),disabled:le.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[78]||(e[78]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:le.value},{default:a(()=>[l(u,{prop:"client_id",label:"Client ID"}),l(u,{prop:"client_secret",label:"Client Secret","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("google",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("google",t)},{default:a(()=>e[79]||(e[79]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("google",t)},{default:a(()=>e[80]||(e[80]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.google]])]),_:1}),l(A,{label:"GitLab配置",name:"gitlab"},{default:a(()=>[n("div",xe,[e[84]||(e[84]=n("p",null,"配置说明：",-1)),n("p",null,[e[82]||(e[82]=o("1. 请先前往 GitLab 实例的应用设置页面获取相关配置（对于公共 GitLab，地址为：")),l(b,{href:"https://gitlab.com/-/profile/applications",type:"primary",target:"_blank"},{default:a(()=>e[81]||(e[81]=[o("GitLab 应用设置")])),_:1}),e[83]||(e[83]=o("）"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[85]||(e[85]=n("p",null,"3. 权限范围请选择：api, read_user, profile, email",-1)),e[86]||(e[86]=n("p",null,"4. 对于私有化部署的 GitLab，请填写完整的 GitLab 服务器地址（例如：https://gitlab.example.com）",-1))]),n("div",Te,[l(v,{type:"primary",onClick:e[5]||(e[5]=t=>I("gitlab")),disabled:te.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[87]||(e[87]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:te.value},{default:a(()=>[l(u,{prop:"client_id",label:"Client ID"}),l(u,{prop:"client_secret",label:"Client Secret","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("gitlab",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("gitlab",t)},{default:a(()=>e[88]||(e[88]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("gitlab",t)},{default:a(()=>e[89]||(e[89]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.gitlab]])]),_:1}),l(A,{label:"Gitee配置",name:"gitee"},{default:a(()=>[n("div",Fe,[e[93]||(e[93]=n("p",null,"配置说明：",-1)),n("p",null,[e[91]||(e[91]=o("1. 请先前往 ")),l(b,{href:"https://gitee.com/oauth/applications",type:"primary",target:"_blank"},{default:a(()=>e[90]||(e[90]=[o("Gitee应用管理")])),_:1}),e[92]||(e[92]=o(" 获取相关配置"))]),n("p",null,"2. 回调域名请填写："+c(D.value)+"/oauth/callback",1),e[94]||(e[94]=n("p",null,"3. 权限范围请选择：user_info, emails",-1))]),n("div",He,[l(v,{type:"primary",onClick:e[6]||(e[6]=t=>I("gitee")),disabled:ae.value.length>=1},{default:a(()=>[l(F,null,{default:a(()=>[l(_(B))]),_:1}),e[95]||(e[95]=o("新建配置 "))]),_:1},8,["disabled"])]),W((V(),P(q,{data:ae.value},{default:a(()=>[l(u,{prop:"client_id",label:"Client ID"}),l(u,{prop:"client_secret",label:"Client Secret","show-overflow-tooltip":""}),l(u,{prop:"redirect_uri",label:"回调域名","show-overflow-tooltip":""},{default:a(({row:t})=>[l(b,{type:"primary",href:t.redirect_uri,target:"_blank",underline:!1},{default:a(()=>[o(c(t.redirect_uri),1)]),_:2},1032,["href"])]),_:1}),l(u,{prop:"enabled",label:"状态",width:"100"},{default:a(({row:t})=>[l(y,{modelValue:t.enabled,"onUpdate:modelValue":p=>t.enabled=p,onChange:p=>T("gitee",t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(u,{label:"操作",width:"200",fixed:"right"},{default:a(({row:t})=>[l(H,null,{default:a(()=>[l(v,{type:"primary",icon:_(E),onClick:p=>L("gitee",t)},{default:a(()=>e[96]||(e[96]=[o(" 编辑 ")])),_:2},1032,["icon","onClick"]),l(v,{type:"danger",icon:_(N),onClick:p=>x("gitee",t)},{default:a(()=>e[97]||(e[97]=[o(" 删除 ")])),_:2},1032,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,U.value.gitee]])]),_:1})]),_:1},8,["modelValue"]),l(ge,{modelValue:j.value,"onUpdate:modelValue":e[40]||(e[40]=t=>j.value=t),title:ne.value,width:"600px"},{footer:a(()=>[l(v,{onClick:e[39]||(e[39]=t=>j.value=!1)},{default:a(()=>e[104]||(e[104]=[o("取消")])),_:1}),l(v,{type:"primary",onClick:re,loading:Q.value},{default:a(()=>e[105]||(e[105]=[o(" 确定 ")])),_:1},8,["loading"])]),default:a(()=>[l(pe,{ref_key:"formRef",ref:K,model:i.value,rules:ue,"label-width":"120px"},{default:a(()=>[C.value==="wecom"?(V(),S(O,{key:0},[l(g,{label:"企业ID",prop:"corp_id"},{default:a(()=>[l(m,{modelValue:i.value.corp_id,"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.corp_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"应用ID",prop:"agent_id"},{default:a(()=>[l(m,{modelValue:i.value.agent_id,"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.agent_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"应用密钥",prop:"secret"},{default:a(()=>[l(m,{modelValue:i.value.secret,"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1}),l(g,{label:"是否同步",prop:"sync_enabled"},{default:a(()=>[l(y,{modelValue:i.value.sync_enabled,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.sync_enabled=t)},null,8,["modelValue"]),e[98]||(e[98]=n("span",{class:"form-item-tip"},"开启后，将同步企业微信用户数据到LDAP",-1))]),_:1}),l(g,{label:"获取用户列表",prop:"fetch_users"},{default:a(()=>[l(y,{modelValue:i.value.fetch_users,"onUpdate:modelValue":e[13]||(e[13]=t=>i.value.fetch_users=t)},null,8,["modelValue"]),e[99]||(e[99]=n("span",{class:"form-item-tip"},"开启后，将定期从企业微信获取用户列表",-1))]),_:1})],64)):M("",!0),C.value==="feishu"?(V(),S(O,{key:1},[l(g,{label:"应用ID",prop:"app_id"},{default:a(()=>[l(m,{modelValue:i.value.app_id,"onUpdate:modelValue":e[14]||(e[14]=t=>i.value.app_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"应用密钥",prop:"app_secret"},{default:a(()=>[l(m,{modelValue:i.value.app_secret,"onUpdate:modelValue":e[15]||(e[15]=t=>i.value.app_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[16]||(e[16]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1}),l(g,{label:"是否同步",prop:"sync_enabled"},{default:a(()=>[l(y,{modelValue:i.value.sync_enabled,"onUpdate:modelValue":e[17]||(e[17]=t=>i.value.sync_enabled=t)},null,8,["modelValue"]),e[100]||(e[100]=n("span",{class:"form-item-tip"},"开启后，将同步飞书用户数据到LDAP",-1))]),_:1}),l(g,{label:"获取用户列表",prop:"fetch_users"},{default:a(()=>[l(y,{modelValue:i.value.fetch_users,"onUpdate:modelValue":e[18]||(e[18]=t=>i.value.fetch_users=t)},null,8,["modelValue"]),e[101]||(e[101]=n("span",{class:"form-item-tip"},"开启后，将定期从飞书获取用户列表",-1))]),_:1})],64)):M("",!0),C.value==="dingtalk"?(V(),S(O,{key:2},[l(g,{label:"Client ID",prop:"client_id"},{default:a(()=>[l(m,{modelValue:i.value.client_id,"onUpdate:modelValue":e[19]||(e[19]=t=>i.value.client_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Client Secret",prop:"client_secret"},{default:a(()=>[l(m,{modelValue:i.value.client_secret,"onUpdate:modelValue":e[20]||(e[20]=t=>i.value.client_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"APP ID",prop:"app_id"},{default:a(()=>[l(m,{modelValue:i.value.app_id,"onUpdate:modelValue":e[21]||(e[21]=t=>i.value.app_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[22]||(e[22]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1}),l(g,{label:"是否同步",prop:"sync_enabled"},{default:a(()=>[l(y,{modelValue:i.value.sync_enabled,"onUpdate:modelValue":e[23]||(e[23]=t=>i.value.sync_enabled=t)},null,8,["modelValue"]),e[102]||(e[102]=n("span",{class:"form-item-tip"},"开启后，将同步钉钉用户数据到LDAP",-1))]),_:1}),l(g,{label:"获取用户列表",prop:"fetch_users"},{default:a(()=>[l(y,{modelValue:i.value.fetch_users,"onUpdate:modelValue":e[24]||(e[24]=t=>i.value.fetch_users=t)},null,8,["modelValue"]),e[103]||(e[103]=n("span",{class:"form-item-tip"},"开启后，将定期从钉钉获取用户列表",-1))]),_:1})],64)):M("",!0),C.value==="github"?(V(),S(O,{key:3},[l(g,{label:"Client ID",prop:"client_id"},{default:a(()=>[l(m,{modelValue:i.value.client_id,"onUpdate:modelValue":e[25]||(e[25]=t=>i.value.client_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Client Secret",prop:"client_secret"},{default:a(()=>[l(m,{modelValue:i.value.client_secret,"onUpdate:modelValue":e[26]||(e[26]=t=>i.value.client_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[27]||(e[27]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1})],64)):M("",!0),C.value==="google"?(V(),S(O,{key:4},[l(g,{label:"Client ID",prop:"client_id"},{default:a(()=>[l(m,{modelValue:i.value.client_id,"onUpdate:modelValue":e[28]||(e[28]=t=>i.value.client_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Client Secret",prop:"client_secret"},{default:a(()=>[l(m,{modelValue:i.value.client_secret,"onUpdate:modelValue":e[29]||(e[29]=t=>i.value.client_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[30]||(e[30]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1})],64)):M("",!0),C.value==="gitlab"?(V(),S(O,{key:5},[l(g,{label:"GitLab 地址",prop:"gitlab_server"},{default:a(()=>[l(m,{modelValue:i.value.gitlab_server,"onUpdate:modelValue":e[31]||(e[31]=t=>i.value.gitlab_server=t),placeholder:"例如：https://gitlab.example.com"},null,8,["modelValue"])]),_:1}),l(g,{label:"Client ID",prop:"client_id"},{default:a(()=>[l(m,{modelValue:i.value.client_id,"onUpdate:modelValue":e[32]||(e[32]=t=>i.value.client_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Client Secret",prop:"client_secret"},{default:a(()=>[l(m,{modelValue:i.value.client_secret,"onUpdate:modelValue":e[33]||(e[33]=t=>i.value.client_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[34]||(e[34]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1})],64)):M("",!0),C.value==="gitee"?(V(),S(O,{key:6},[l(g,{label:"Client ID",prop:"client_id"},{default:a(()=>[l(m,{modelValue:i.value.client_id,"onUpdate:modelValue":e[35]||(e[35]=t=>i.value.client_id=t)},null,8,["modelValue"])]),_:1}),l(g,{label:"Client Secret",prop:"client_secret"},{default:a(()=>[l(m,{modelValue:i.value.client_secret,"onUpdate:modelValue":e[36]||(e[36]=t=>i.value.client_secret=t),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(g,{label:"回调域名",prop:"redirect_uri"},{default:a(()=>[l(m,{modelValue:i.value.redirect_uri,"onUpdate:modelValue":e[37]||(e[37]=t=>i.value.redirect_uri=t),placeholder:"留空将自动使用当前域名"},null,8,["modelValue"])]),_:1})],64)):M("",!0),l(g,{label:"状态",prop:"enabled"},{default:a(()=>[l(y,{modelValue:i.value.enabled,"onUpdate:modelValue":e[38]||(e[38]=t=>i.value.enabled=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),We=ke(qe,[["__scopeId","data-v-5ba25a1f"]]);export{We as default};
