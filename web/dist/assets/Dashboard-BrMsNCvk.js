import{d as E,r as h,o as U,t as I,w as t,B as X,C as q,c as g,f as o,g as A,n as u,F as G,s as L,e as n,k as b,D as _,i as x,E as k,j as i,x as C,G as H,_ as z,u as R,y as T,q as W,H as j,v as K,z as J}from"./index-DyXSoxUy.js";import{s as B,g as V,a as M}from"./sync--PFXVL9y.js";import{w as P,f as Y,d as Z}from"./dingtalk-BbRYVIoV.js";const $={class:"widget-header"},ee={class:"widget-content"},te={key:0,class:"empty-data"},se={class:"sync-info"},ae={class:"sync-name"},oe={class:"sync-time"},le={key:0},ne={key:1},ie={class:"sync-action"},re=E({__name:"SyncStatusWidget",setup(N){const S=x(),y=h([]),c=h(!1),v=h(""),f=s=>({wecom:"企业微信",feishu:"飞书",dingtalk:"钉钉"})[s]||s,w=s=>({wecom:"primary",feishu:"success",dingtalk:"warning"})[s]||"",a=s=>H(s).format("YYYY-MM-DD HH:mm:ss"),l=async()=>{c.value=!0;try{const s=await B.getConfigs();y.value=s.data.filter(e=>e.enabled)}catch(s){console.error("加载同步配置失败:",s),k.error("加载同步配置失败")}finally{c.value=!1}},D=async s=>{var e,d;v.value=s.id;try{const m=await B.syncNow(s.id);k.success(m.data.message||"同步成功"),l()}catch(m){console.error("同步失败:",m),k.error(((d=(e=m.response)==null?void 0:e.data)==null?void 0:d.message)||"同步失败")}finally{v.value=""}},Q=()=>{S.push("/sync/configs")};return U(()=>{l()}),(s,e)=>{const d=A("el-button"),m=A("el-empty"),r=A("el-tag"),O=A("el-card"),F=q("loading");return i(),I(O,{class:"sync-status-widget"},{header:t(()=>[n("div",$,[e[1]||(e[1]=n("span",null,"同步状态",-1)),o(d,{type:"primary",size:"small",onClick:l,icon:b(_),loading:c.value},{default:t(()=>e[0]||(e[0]=[u(" 刷新 ")])),_:1},8,["icon","loading"])])]),default:t(()=>[X((i(),g("div",ee,[y.value.length===0?(i(),g("div",te,[o(m,{description:"暂无同步配置"}),o(d,{type:"primary",onClick:Q,size:"small",class:"add-config-btn"},{default:t(()=>e[2]||(e[2]=[u(" 添加配置 ")])),_:1})])):(i(!0),g(G,{key:1},L(y.value,p=>(i(),g("div",{key:p.id,class:"sync-item"},[n("div",se,[n("div",ae,[o(r,{type:w(p.sync_type),size:"small",class:"tag-margin"},{default:t(()=>[u(C(f(p.sync_type)),1)]),_:2},1032,["type"]),u(" "+C(p.name),1)]),n("div",oe,[e[3]||(e[3]=u(" 最后同步: ")),p.last_sync_time?(i(),g("span",le,C(a(p.last_sync_time)),1)):(i(),g("span",ne,"--"))])]),n("div",ie,[o(d,{type:"primary",size:"small",onClick:Se=>D(p),loading:v.value===p.id,icon:b(_)},{default:t(()=>e[4]||(e[4]=[u(" 同步 ")])),_:2},1032,["onClick","loading","icon"])])]))),128))])),[[F,c.value]])]),_:1})}}}),ce=z(re,[["__scopeId","data-v-e7ccd75f"]]),de="data:image/png;base64,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",Ae={class:"dashboard"},ge={class:"card-content"},ue={class:"card-icon"},ye=["src"],me={class:"card-info"},pe={class:"title"},he={class:"value"},ve={class:"chart-header"},Ce=E({__name:"Dashboard",setup(N){x();const S=R();T(()=>S.user);const y=h("week"),c=h([{title:"企业微信用户",value:0,type:"primary",icon:"Document",imgIcon:P,trend:0},{title:"飞书用户",value:0,type:"success",icon:"FolderOpened",imgIcon:Y,trend:0},{title:"钉钉用户",value:0,type:"warning",icon:"User",imgIcon:Z,trend:0},{title:"OpenLDAP用户",value:0,type:"info",icon:"User",imgIcon:de,trend:0}]),v=async()=>{try{const a=await V();c.value[0].value=a.data.wecom_users,c.value[1].value=a.data.feishu_users,c.value[2].value=a.data.dingtalk_users,c.value[3].value=a.data.ldap_users}catch(a){console.error("获取用户统计数据失败:",a)}},f=async()=>{try{const a=await M(y.value);w.value={tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:"#eee",borderWidth:1,textStyle:{color:"#666"}},legend:{data:["企业微信","飞书","钉钉","OpenLDAP"],right:"10%",top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:a.data.dates,axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",axisLine:{show:!1},splitLine:{lineStyle:{color:"#eee"}}},series:[{name:"企业微信",type:"line",smooth:!0,data:a.data.wecom_users,lineStyle:{width:3,color:"#409EFF"},symbol:"circle",symbolSize:6},{name:"飞书",type:"line",smooth:!0,data:a.data.feishu_users,lineStyle:{width:3,color:"#67C23A"},symbol:"circle",symbolSize:6},{name:"钉钉",type:"line",smooth:!0,data:a.data.dingtalk_users,lineStyle:{width:3,color:"#E6A23C"},symbol:"circle",symbolSize:6},{name:"OpenLDAP",type:"line",smooth:!0,data:a.data.ldap_users,lineStyle:{width:3,color:"#909399"},symbol:"circle",symbolSize:6}]}}catch(a){console.error("获取趋势数据失败:",a)}};U(async()=>{await S.fetchUserInfo(),await v(),f()}),W(y,()=>{f()});const w=h({tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.9)",borderColor:"#eee",borderWidth:1,textStyle:{color:"#666"}},legend:{data:["企业微信","飞书","钉钉","OpenLDAP"],right:"10%",top:"0%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"],axisLine:{lineStyle:{color:"#ddd"}}},yAxis:{type:"value",axisLine:{show:!1},splitLine:{lineStyle:{color:"#eee"}}},series:[{name:"企业微信",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],lineStyle:{width:3,color:"#409EFF"},symbol:"circle",symbolSize:6},{name:"飞书",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],lineStyle:{width:3,color:"#67C23A"},symbol:"circle",symbolSize:6},{name:"钉钉",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],lineStyle:{width:3,color:"#E6A23C"},symbol:"circle",symbolSize:6},{name:"OpenLDAP",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],lineStyle:{width:3,color:"#909399"},symbol:"circle",symbolSize:6}]});return(a,l)=>{const D=A("el-icon"),Q=A("el-card"),s=A("el-col"),e=A("el-row"),d=A("el-radio-button"),m=A("el-radio-group");return i(),g("div",Ae,[o(e,{gutter:20},{default:t(()=>[(i(!0),g(G,null,L(c.value,r=>(i(),I(s,{span:6,key:r.title},{default:t(()=>[o(Q,{class:K(["data-card",r.type])},{default:t(()=>[n("div",ge,[n("div",ue,[r.imgIcon?(i(),g("img",{key:0,src:r.imgIcon,class:"card-img-icon"},null,8,ye)):(i(),I(D,{key:1},{default:t(()=>[(i(),I(J(r.icon)))]),_:2},1024))]),n("div",me,[n("div",pe,C(r.title),1),n("div",he,C(r.value),1)])])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1}),o(e,{gutter:20,class:"chart-row"},{default:t(()=>[o(s,{span:16},{default:t(()=>[o(Q,{class:"chart-card"},{header:t(()=>[n("div",ve,[l[4]||(l[4]=n("h3",null,"用户数趋势",-1)),o(m,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=r=>y.value=r),size:"small"},{default:t(()=>[o(d,{value:"week"},{default:t(()=>l[1]||(l[1]=[u("本周")])),_:1}),o(d,{value:"month"},{default:t(()=>l[2]||(l[2]=[u("本月")])),_:1}),o(d,{value:"year"},{default:t(()=>l[3]||(l[3]=[u("全年")])),_:1})]),_:1},8,["modelValue"])])]),default:t(()=>[o(j,{option:w.value,height:"360px"},null,8,["option"])]),_:1})]),_:1}),o(s,{span:8},{default:t(()=>[o(ce)]),_:1})]),_:1})])}}}),Ie=z(Ce,[["__scopeId","data-v-e6243895"]]);export{Ie as default};
